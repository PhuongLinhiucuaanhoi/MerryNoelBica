<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Christmas Letter</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{height:100vh;overflow:hidden;font-family:'Baloo 2',cursive}
.background{position:fixed;inset:0;background:linear-gradient(rgba(0,0,0,.45),rgba(0,0,0,.45)),url("background.jpg") center/cover no-repeat;z-index:-3}
#snow{position:fixed;inset:0;pointer-events:none;z-index:-2}
.container{height:100%;display:flex;flex-direction:column;align-items:center;padding-top:40px}
.hint{color:#fff;font-size:20px;margin-bottom:16px}
.girl{width:70%;max-width:320px;margin-bottom:70px;position:relative}
#scarf{position:absolute;width:55%;max-width:240px;bottom:12%;touch-action:none}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;z-index:5}
.envelope{width:92%;max-width:460px;height:260px;background:#f0d8b3;border-radius:12px;position:relative;transform:rotateX(90deg);transform-origin:top;transition: transform 1.2s ease;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.envelope::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:#e6b97c;clip-path: polygon(0 0, 50% 40%, 100% 0, 100% 100%, 0 100%);transition: transform 1.2s ease;transform-origin:top}
.card{width:100%;height:100%;background:#fff8ef;border-radius:12px;padding:16px;position:absolute;top:0;left:0;display:flex;gap:12px;opacity:0;transform: scaleX(0);transform-origin:center;transition: opacity 0.8s ease, transform 1s ease;overflow:hidden}
.card-left,.card-right{width:50%}
.card-left img{width:100%;height:100%;object-fit:cover;border-radius:10px}
.card-right{font-size:16px;line-height:1.6;overflow-y:auto}
.close{position:absolute;top:10px;right:14px;font-size:22px;cursor:pointer;z-index:10}
.video-link{margin-top:12px;color:#c0392b;text-decoration:underline;cursor:pointer}
.video-overlay{position:fixed;inset:0;background:black;display:none;z-index:10}
video{width:100%;height:100%;object-fit:contain}
.password-box{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:20px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.25);display:none;z-index:15;text-align:center}
.password-box input{width:80%;padding:8px;margin-top:12px;font-size:16px}
.password-box button{margin-top:10px;padding:6px 14px;font-size:16px;cursor:pointer}
.password-box .hint{margin-top:8px;font-size:12px;color:#555}
</style>
</head>

<body>
<div class="background"></div>
<canvas id="snow"></canvas>

<div class="container">
  <div class="hint">üß£ Qu√†ng khƒÉn cho Bica ƒë·ªÉ m·ªü th∆∞</div>
  <img src="girl.png" class="girl" id="girl">
  <img src="scarf.png" id="scarf">
</div>

<div class="overlay" id="overlay">
  <div class="envelope" id="envelope">
    <div class="card" id="card">
      <div class="close" id="close">‚úï</div>
      <div class="card-left">
        <img src="photo.jpg">
      </div>
      <div class="card-right">
        <p><strong>üéÑ Ph∆∞∆°ng Linh y√™u d·∫•u,</strong></p>
        <p>Anh ch√∫c em 1 m√πa gi√°ng sinh vui v·∫ª. Th·∫≠t ti·∫øc l√† m√¨nh kh√¥ng ƒë∆∞·ª£c ƒë√≥n gi√°ng sinh c√πng nhau n·ªØa nh∆∞ng anh hy v·ªçng m√≥n qu√† n√†y s·∫Ω khi·∫øn em c·∫£m th·∫•y s·ª± hi·ªán di·ªán c·ªßa anh b√™n c·∫°nh em, em kh√¥ng c√¥ ƒë∆°n. Anh v·∫´n nh·ªõ em vi·∫øt trong b·ª©c th∆∞ tay ƒë·∫ßu ti√™n g·ª≠i anh r·∫±ng mong sang nƒÉm l·∫°i ƒë∆∞·ª£c anh qu√†ng khƒÉn cho em, anh ·ªü xa kh√¥ng l√†m ƒë∆∞·ª£c n√™n c·∫£m ∆°n em ƒë√£ gi√∫p anh qu√†ng khƒÉn cho Ph∆∞∆°ng Linh nh√°, ƒë·ª£i khi n√†o anh v√† em ƒëo√†n t·ª• th√¨ anh s·∫Ω qu√†ng cho em (m·∫∑c d√π c√≥ th·ªÉ l√† m√πa h√® haha)<br><br>Hihi b·∫•t ng·ªù ch∆∞a n√®.</p>
        <p class="video-link" id="openVideo">
          Anh c√≥ v√†i l·ªùi mu·ªën nh·∫Øn nh·ªß ƒë·∫øn em nh√¢n d·ªãp Noel, ·∫•n v√†o ƒë√¢y ƒë·ªÉ xem nh√©!
        </p>
      </div>
    </div>
  </div>
</div>

<div class="password-box" id="passwordBox">
  <div>Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m·ªü th∆∞:</div>
  <input type="password" id="passwordInput" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
  <br>
  <button id="passwordBtn">M·ªü th∆∞</button>
  <div class="hint">G·ª£i √Ω: Ng√†y th√°ng nƒÉm l·∫ßn ƒë·∫ßu b·∫°n g·∫∑p ng∆∞·ªùi y√™u b·∫°n, v√≠ d·ª•: 27112023</div>
</div>

<div class="video-overlay" id="videoBox">
  <video id="videoPlayer" controls autoplay></video>
</div>

<script>
/* SNOW */
const c=document.getElementById("snow"),x=c.getContext("2d");
function rs(){c.width=innerWidth;c.height=innerHeight}
rs();onresize=rs;
let s=Array.from({length:100},()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*3+1,v:Math.random()+.5}));
(function d(){x.clearRect(0,0,c.width,c.height);x.fillStyle="rgba(255,255,255,.9)";x.beginPath();s.forEach(f=>{x.moveTo(f.x,f.y);x.arc(f.x,f.y,f.r,0,Math.PI*2);f.y+=f.v;if(f.y>c.height){f.y=0;f.x=Math.random()*c.width}});x.fill();requestAnimationFrame(d)})();

/* SCARF DRAG */
const scarf=document.getElementById("scarf"),
girl=document.getElementById("girl"),
overlay=document.getElementById("overlay"),
envelope=document.getElementById("envelope"),
card=document.getElementById("card"),
passwordBox=document.getElementById("passwordBox"),
passwordInput=document.getElementById("passwordInput"),
passwordBtn=document.getElementById("passwordBtn"),
videoBox=document.getElementById("videoBox"),
videoPlayer=document.getElementById("videoPlayer");

let drag=false;
scarf.onpointerdown=()=>drag=true;
onpointerup=()=>drag=false;
onpointermove=e=>{
  if(!drag) return;
  scarf.style.left=e.clientX-scarf.offsetWidth/2+"px";
  scarf.style.top=e.clientY-scarf.offsetHeight/2+"px";
  const s=scarf.getBoundingClientRect(),g=girl.getBoundingClientRect();
  if(s.top<g.top+g.height/3){drag=false;passwordBox.style.display="block"}
};

/* PASSWORD CHECK */
passwordBtn.onclick=()=>{
  if(passwordInput.value==="26112023"){
    passwordBox.style.display="none";
    overlay.style.display="flex";
    envelope.style.transform="rotateX(0deg)";
    setTimeout(()=>{card.style.opacity=1;card.style.transform="scaleX(1)";playBackgroundVideo()},1200);
  }else{alert("Sai m·∫≠t kh·∫©u, th·ª≠ l·∫°i nh√©!");passwordInput.value=""}
};

/* CLOSE */
document.getElementById("close").onclick=()=>{
  overlay.style.display="none";
  scarf.style.display="block";
  envelope.style.transform="rotateX(90deg)";
  card.style.opacity=0;
  card.style.transform="scaleX(0)";
};

/* VIDEO LIST */
const videos=[
  "https://drive.google.com/uc?export=download&id=1Cq8_A5U_SYdduSCxXfhsGaP66JT-q-B2",
  "https://drive.google.com/uc?export=download&id=18ArbyXiUgV7bOEtawBoaE1-c0MleLp5M",
  "https://drive.google.com/uc?export=download&id=1LPv_7uDEkBCv_koLdnyUYEmPBYv_x3eM"
];
let currentVideo=0;

document.getElementById("openVideo").onclick = () => {
  currentVideo=0;
  videoPlayer.src=videos[currentVideo];
  videoBox.style.display="block";
  videoPlayer.play();
};

videoPlayer.onended=()=>{
  currentVideo++;
  if(currentVideo<videos.length){
    videoPlayer.src=videos[currentVideo];
    videoPlayer.play();
  }else{
    videoBox.style.display="none";
  }
};

videoBox.onclick=()=>{
  videoBox.style.display="none";
  videoPlayer.pause();
};

/* BACKGROUND VIDEO (MUSIC) */
function playBackgroundVideo(){
  currentVideo=1; // navidad_music.mp4
  videoPlayer.src=videos[currentVideo];
  videoBox.style.display="block";
  videoPlayer.play();
  videoPlayer.onended=()=>{videoBox.style.display="none";}
  videoBox.onclick=()=>{videoBox.style.display="none";videoPlayer.pause();}
}
</script>
</body>
</html>
